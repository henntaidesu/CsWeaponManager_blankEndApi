# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

### ç¬¬ä¸€æ­¥: å¯åŠ¨åç«¯æœåŠ¡

```bash
cd D:\Project\CsWeaponManager\blankEndApi
python blankEndApi.py
```

å¯åŠ¨æˆåŠŸåä¼šçœ‹åˆ°:
```
æ­£åœ¨åˆå§‹åŒ–æ•°æ®åº“...
âœ… æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ: XX/XX ä¸ªè¡¨
 * Running on http://0.0.0.0:9001
```

**æ³¨æ„**: é¦–æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»º `yyyp_weapon_classID` è¡¨ï¼

---

### ç¬¬äºŒæ­¥: è¿è¡Œæµ‹è¯•(å¯é€‰)

æ‰“å¼€æ–°çš„å‘½ä»¤è¡Œçª—å£:

```bash
cd D:\Project\CsWeaponManager\blankEndApi
python test_weapon_classid.py
```

å¦‚æœçœ‹åˆ° "ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡!" è¯´æ˜ä¸€åˆ‡æ­£å¸¸ï¼

---

### ç¬¬ä¸‰æ­¥: æµ‹è¯•APIæ¥å£

#### æ–¹æ³•1: ä½¿ç”¨æµè§ˆå™¨
ç›´æ¥è®¿é—®:
```
http://localhost:9001/youpin898SelectWeaponV1/getWeaponList
```

#### æ–¹æ³•2: ä½¿ç”¨Python
```python
import requests

# è·å–æ­¦å™¨åˆ—è¡¨
response = requests.get('http://localhost:9001/youpin898SelectWeaponV1/getWeaponList')
print(response.json())
```

#### æ–¹æ³•3: ä½¿ç”¨curl
```bash
curl http://localhost:9001/youpin898SelectWeaponV1/getWeaponList
```

---

### ç¬¬å››æ­¥: ä»çˆ¬è™«å¯¼å…¥æ•°æ®

åœ¨ä½ çš„çˆ¬è™«ä»£ç ä¸­æ·»åŠ :

```python
import requests
from Spider.src.web_site.youping.select_weapon.select_templateId import selectTemplateId

# é…ç½®
config = {
    'Sessionid': 'your_session',
    'token': 'your_token',
    'app_version': 'your_version',
    'app_type': 'your_type',
    'phone': 'your_phone',
    'userId': 'your_userId',
    'steamId': 'your_steamId'
}

# è·å–æ­¦å™¨æ•°æ®
selector = selectTemplateId(config)
weapon_list = selector.getAllTemplateIds(['CSGO_Type_Knife_Unlimited'])

# å‘é€åˆ°åç«¯API
api_url = "http://localhost:9001/youpin898SelectWeaponV1/batchInsertOrUpdate"
response = requests.post(api_url, json=weapon_list)

result = response.json()
print(f"âœ… æˆåŠŸå¯¼å…¥ {result['success_count']}/{result['total_count']} æ¡æ­¦å™¨æ•°æ®")
```

---

## ğŸ“‹ å¸¸ç”¨APIæ¥å£

### 1. è·å–æ‰€æœ‰æ­¦å™¨
```python
GET http://localhost:9001/youpin898SelectWeaponV1/getWeaponList
```

### 2. æ ¹æ®ç±»å‹æŸ¥è¯¢
```python
GET http://localhost:9001/youpin898SelectWeaponV1/getWeaponByType/åŒ•é¦–
```

### 3. æœç´¢æ­¦å™¨
```python
import requests

response = requests.post(
    'http://localhost:9001/youpin898SelectWeaponV1/searchWeapon',
    json={
        'weapon_type': 'åŒ•é¦–',
        'item_name': 'å¤šæ™®å‹’'
    }
)
print(response.json())
```

### 4. æ‰¹é‡æ’å…¥æ•°æ®
```python
import requests

weapon_data = [
    {
        'Id': 43705,
        'CommodityName': 'å¼¯åˆ€ï¼ˆâ˜…ï¼‰ | å¤šæ™®å‹’ (å´­æ–°å‡ºå‚)',
        'weapon_type': 'åŒ•é¦–',
        'weapon_name': 'å¼¯åˆ€ï¼ˆâ˜…ï¼‰',
        'item_name': 'å¤šæ™®å‹’',
        'OnSaleCount': 130,
        'OnLeaseCount': 52
    }
]

response = requests.post(
    'http://localhost:9001/youpin898SelectWeaponV1/batchInsertOrUpdate',
    json=weapon_data
)
print(response.json())
```

---

## ğŸ” éªŒè¯æ•°æ®åº“

### ä½¿ç”¨SQLiteæµè§ˆå™¨
1. ä¸‹è½½ [DB Browser for SQLite](https://sqlitebrowser.org/)
2. æ‰“å¼€æ•°æ®åº“æ–‡ä»¶: `blankEndApi/csweaponmanager.db`
3. æŸ¥çœ‹ `yyyp_weapon_classID` è¡¨

### ä½¿ç”¨SQLå‘½ä»¤
```python
import sqlite3

conn = sqlite3.connect('blankEndApi/csweaponmanager.db')
cursor = conn.cursor()

# æŸ¥çœ‹è¡¨ç»“æ„
cursor.execute("PRAGMA table_info(yyyp_weapon_classID)")
print(cursor.fetchall())

# æŸ¥çœ‹æ•°æ®
cursor.execute("SELECT * FROM yyyp_weapon_classID LIMIT 10")
for row in cursor.fetchall():
    print(row)

conn.close()
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¯åŠ¨æ—¶æŠ¥é”™ "æ¨¡å—æœªæ‰¾åˆ°"
**è§£å†³**: ç¡®ä¿åœ¨ `blankEndApi` ç›®å½•ä¸‹è¿è¡Œå‘½ä»¤

### Q2: APIè¿”å›404
**è§£å†³**: æ£€æŸ¥URLæ˜¯å¦æ­£ç¡®ï¼Œæ³¨æ„å¤§å°å†™

### Q3: æ•°æ®æ²¡æœ‰ä¿å­˜
**è§£å†³**: 
1. æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
2. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
3. ç¡®è®¤æ•°æ®æ ¼å¼æ­£ç¡®

### Q4: å¦‚ä½•æ¸…ç©ºè¡¨æ•°æ®
```python
from src.db_manager.yyyp.yyyp_weapon_classID import YyypWeaponClassIDModel

# åˆ é™¤æ‰€æœ‰æ•°æ®
weapons = YyypWeaponClassIDModel.find_all()
for weapon in weapons:
    weapon.delete()
```

---

## ğŸ“š æ›´å¤šæ–‡æ¡£

- [APIå®Œæ•´æ–‡æ¡£](./README.md) - æ‰€æœ‰æ¥å£çš„è¯¦ç»†è¯´æ˜
- [å®Œæˆè¯´æ˜](./å®Œæˆè¯´æ˜.md) - é¡¹ç›®ç»“æ„å’Œå®ç°ç»†èŠ‚

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. âœ… åˆ›å»ºå®šæ—¶ä»»åŠ¡è‡ªåŠ¨åŒæ­¥æ­¦å™¨æ•°æ®
2. âœ… åœ¨å‰ç«¯æ·»åŠ æ­¦å™¨æµè§ˆé¡µé¢
3. âœ… æ·»åŠ æ•°æ®ç»Ÿè®¡å’Œåˆ†æåŠŸèƒ½
4. âœ… å®ç°æ­¦å™¨ä»·æ ¼ç›‘æ§

---

## ğŸ’¡ æç¤º

- åç«¯æœåŠ¡é»˜è®¤è¿è¡Œåœ¨ `http://localhost:9001`
- æ‰€æœ‰æ­¦å™¨ç›¸å…³æ¥å£è·¯å¾„å‰ç¼€: `/youpin898SelectWeaponV1`
- æ•°æ®åº“æ–‡ä»¶ä½ç½®: `blankEndApi/csweaponmanager.db`
- æ—¥å¿—æ–‡ä»¶ä½ç½®: `blankEndApi/log/`

å¼€å§‹ä½¿ç”¨å§ï¼ ğŸ‰

